<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>能力评估</title>
  <style>
    /* 整体页面样式 */
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 0;
    }

    /* 标题样式 */
    h1 {
      color: #333;
    }

    /* 根容器样式，带有边框的区域 */
    #root {
      width: 1000px;
      margin: 50px auto;
      padding: 20px;
      background-color: white;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }

    /* 表单内标签样式 */
    form label {
      display: block;
      margin-bottom: 10px;
      font-weight: bold;
    }

    /* 表单输入框样式 */
    form input[type="text"]{
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    /* 单选按钮容器样式 */
    #sex {
      margin-bottom: 15px;
    }

    #sex label {
      margin-right: 15px;
    }

    /* 提交按钮样式 */
    form button[type="submit"] {
      background-color: #007BFF;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    form button[type="submit"]:hover {
      background-color: #0056b3;
    }

    /* 返回主界面按钮所在链接样式 */
    a {
      text-decoration: none;
    }

    /* 返回主界面按钮样式 */
    button {
      background-color: #ccc;
      color: #333;
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    button:hover {
      background-color: #aaa;
    }
  </style>
</head>
<body>
<h1 style="text-align: center">能力评估</h1>
<div id="root" style="border: 1px solid black">
  <form id="addForm" >
    <h2>一、日常生活活动评估</h2>
    <label for="feed">1.进食：指用餐具将食物由容器送到口中、咀嚼、吞咽等过程</label>
    <div id="feed">
      <label><input type="radio" name="feed" value="10">可独立进食（在合理的时间内独立进食准备好的食物）</label>
      <label><input type="radio" name="feed" value="5">需部分帮助（进食过程中需要一定帮助，如协助把持餐具）</label>
      <label><input type="radio" name="feed" value="0">需极大帮助或完全依赖他人，或有留置营养管</label>
    </div>
    <label for="bathe">2.洗澡</label>
    <div id="bathe">
      <label><input type="radio" name="bathe" value="5">准备好洗澡水后，可自己独立完成洗澡过程</label>
      <label><input type="radio" name="bathe" value="0">在洗澡过程中需他人帮助</label>
    </div>
    <label for="embellish">3.修饰：指洗脸、刷牙、梳头、刮脸等</label>
    <div id="embellish">
      <label><input type="radio" name="embellish" value="5">可自己独立完成</label>
      <label><input type="radio" name="embellish" value="0">需他人帮助</label>
    </div>
    <label for="dress">4.穿衣：指穿脱衣服、系扣、拉拉链、穿脱鞋袜、系鞋带</label>
    <div id="dress">
      <label><input type="radio" name="dress" value="10">可独立完成</label>
      <label><input type="radio" name="dress" value="5">需部分帮助（能自己穿脱，但需他人帮助整理衣物、系扣/鞋带、拉拉链）</label>
      <label><input type="radio" name="dress" value="0">需极大帮助或完全依赖他人</label>
    </div>
    <label for="stool">5.大便控制</label>
    <div id="stool">
      <label><input type="radio" name="stool" value="10">可控制大便</label>
      <label><input type="radio" name="stool" value="5">偶尔失控（每周<1 次），或需要他人提示</label>
      <label><input type="radio" name="stool" value="0">完全失控</label>
    </div>
    <label for="urine">6.小便控制</label>
    <div id="urine">
      <label><input type="radio" name="urine" value="10">可控制小便</label>
      <label><input type="radio" name="urine" value="5">偶尔失控（每天<1 次，但每周>1 次）或需要他人提示</label>
      <label><input type="radio" name="urine" value="0">完全失控，或留置导尿管</label>
    </div>
    <label for="toilet">7.如厕：包括去厕所、解开衣裤、擦净、整理衣裤、冲水</label>
    <div id="toilet">
      <label><input type="radio" name="toilet" value="10">可独立完成</label>
      <label><input type="radio" name="toilet" value="5">需部分帮助（需他人搀扶去厕所、需他人帮忙冲水或整理衣裤等）</label>
      <label><input type="radio" name="toilet" value="0">需极大帮助或完全依赖他人</label>
    </div>
    <label for="bact">8.床椅转移</label>
    <div id="bact">
      <label><input type="radio" name="bact" value="15">可独立完成</label>
      <label><input type="radio" name="bact" value="10">需部分帮助（需他人搀扶或使用拐杖）</label>
      <label><input type="radio" name="bact" value="5">需极大帮助（较大程度上依赖他人搀扶和帮助）</label>
      <label><input type="radio" name="bact" value="0">完全依赖他人</label>
    </div>
    <label for="walk">9.平地行走</label>
    <div id="walk">
      <label><input type="radio" name="walk" value="15">可独立在平地上行走 45m</label>
      <label><input type="radio" name="walk" value="10">需部分帮助（因肢体残疾、平衡能力差、过度衰弱、视力等问题，在一定程度上需他人地搀扶或使用拐杖、助行器等辅助用具）</label>
      <label><input type="radio" name="walk" value="5">需极大帮助（因肢体残疾、平衡能力差、过度衰弱、视力等问题，在较大程度上依赖他人搀扶，或坐在轮椅上自行移动）</label>
      <label><input type="radio" name="walk" value="0">完全依赖他人</label>
    </div>
    <label for="upstairs">10.上下楼梯</label>
    <div id="upstairs">
      <label><input type="radio" name="upstairs" value="10">可独立上下楼梯（连续上下 10-15 个台阶）</label>
      <label><input type="radio" name="upstairs" value="5">需部分帮助（需他人搀扶，或扶着楼梯、使用拐杖等）</label>
      <label><input type="radio" name="upstairs" value="0">需极大帮助或完全依赖他人</label>
    </div>

    <button type="submit">下一步</button>
  </form>
  <div>
    <a href="index.html">
      <button>返回主界面</button>
    </a>
  </div>
</div>
</body>
<script>
  document.getElementById("addForm").addEventListener("submit", function (event) {
    event.preventDefault();
    const name = localStorage.getItem('name');
    const id=localStorage.getItem('id');
    const feed =document.querySelectorAll('input[name=feed]');
    let f;
    feed.forEach(radio => {
      if (radio.checked) {
        f = +radio.value;
      }
    });
    const bathe =document.querySelectorAll('input[name=bathe]');
    let b;
    bathe.forEach(radio => {
      if (radio.checked) {
        b = +radio.value;
      }
    });
    const embellish =document.querySelectorAll('input[name=embellish]');
    let e;
    embellish.forEach(radio => {
      if (radio.checked) {
        e = +radio.value;
      }
    });
    const dress =document.querySelectorAll('input[name=dress]');
    let d;
    dress.forEach(radio => {
      if (radio.checked) {
        d = +radio.value;
      }
    });
    const stool =document.querySelectorAll('input[name=stool]');
    let s;
    stool.forEach(radio => {
      if (radio.checked) {
        s = +radio.value;
      }
    });
    const urine =document.querySelectorAll('input[name=urine]');
    let u;
    urine.forEach(radio => {
      if (radio.checked) {
        u = +radio.value;
      }
    });
    const toilet =document.querySelectorAll('input[name=toilet]');
    let t;
    toilet.forEach(radio => {
      if (radio.checked) {
        t = +radio.value;
      }
    });
    const bact =document.querySelectorAll('input[name=bact]');
    let ba;
    bact.forEach(radio => {
      if (radio.checked) {
        ba = +radio.value;
      }
    });
    const walk =document.querySelectorAll('input[name=walk]');
    let w;
    walk.forEach(radio => {
      if (radio.checked) {
        w = +radio.value;
      }
    });
    const upstairs =document.querySelectorAll('input[name=upstairs]');
    let up;
    upstairs.forEach(radio => {
      if (radio.checked) {
        up = +radio.value;
      }
    });
    const sum = f + b + e + d + s + u + t + ba + w + up;
    let rank;
    if(sum===100){
      rank=0;
    }else if(sum>=65&&sum<=95){
      rank=1;
    }else if(sum>=45&&sum<=60){
      rank=2;
    }else if(sum<=40){
      rank=3;
    }

    fetch("ass/add1", {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        id:id,
        name: name,
        score1: sum,
        rank1: rank,
      })
    })
            .then(res => res.json())
            .then(data => {
              if (data.msg === 'success') {
                alert("提交成功");
                localStorage.setItem('b1',rank);
                window.location.href="assessmentB2.html";
                console.log(data);
              } else {
                alert("提交失败(b1)");
              }
            })
            .catch(error => {
              alert("请求失败，请重试(b1)");
              console.error(error);
            });
  })
    </script>
</html>